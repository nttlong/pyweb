<div title="${_//'Create or edit role'}">


    <div form-layout>
        <div form-template>
            <div>
                <span>${_//"Code"}</span><input type="text" ng-model="model.data.Code">
                <span>${_//"Name"}</span><input type="text" ng-model="model.data.Name">
                <span>${_//"Foreign name"}</span><input type="text" ng-model="model.data.FName">
            </div>
            <div>
                <span>${_//"Description"}</span><textarea style="min-height:200px"  ng-model="model.data.Description" class="form-control" span="12"></textarea>
            </div>
            <div>
                <div  span="12">
                    <div class="btn-toolbar pull-left" role="toolbar">
                        <div class="btn-group">
                            <button type="button" ng-click="$root.$dialog($id).params(model.data.code).url('views/catalogs/users').done()" class="btn btn-default">${_//"Add users ..."}</button>

                        </div>

                    </div>
                    <div class="btn-toolbar pull-right" role="toolbar">

                        <div class="btn-group">
                             <button type="button" class="btn btn-default" ng-click="doSave()">${_//"Save"}</button>
                        </div>
                        <div class="btn-group">
                            <button type="button" ng-click="$doClose()" class="btn btn-default">${_//"Close"}</button>
                        </div>
                    </div>

                </div>

            </div>
            <div>
                <table class="table table-hover" span="12">
                    <thead>
                    <tr>
                        <th>${_//"UserName"}</th>
                         <th>${_//"Emai"}</th>
                         <th>${_//"FirstName"}</th>
                        <th>${_//"LastName"}</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="p in model.data.Users">
                        <td>{{p.UserName}}</td>
                        <td>{{p.Emai}}</td>
                        <td>{{p.FirstName}}</td>
                        <td>{{p.LastName}}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <ajax url="${currentUrl}">
        <call data-id="DoLoad" data-params="{'code':$root.$history.data().code}" ng-model="model.data"/>
        <call data-id="DoSave" data-params="model.data" data-function="doSave" ng-model="model.data"/>
        <call data-id="DoAddUsers" data-params="{code:model.data.Code,users:selectedItems}"
              ng-model="model.listOfUsers"
              data-function="doAddUsers"/>
    </ajax>

</div>
<script>
    (function(scope){
        //scope.model=${initModel}
    });
</script>